<?xml version="1.0" encoding="utf-8" ?>
<configuration>
	<configSections>
		<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net"/>
	</configSections>
	<log4net>
		<!-- ConversionPattern 解释
          %m(message):输出的日志消息，如ILog.Debug(…)输出的一条消息
          %n(new line)：換行
          %d(datetime):输出当前语句运行的时刻
          %r(run time):输出程序从运行到执行到当前语句时消耗的毫秒数
          %t(thread id):当前语句所在的线程ID
          %p(priority): 日志的当前优先级别，即DEBUG、INFO、WARN…等
          %c(class):当前日志对象的名称
          %L：输出语句所在的行号
          %F：输出语句所在的文件名
          %-数字：表示该项的最小长度，如果不够，则用空格填充
          -->
		<!--定义输出到控制台命令行中-->
		<!--<logger name="LogConsole">
			<level value="ALL"/>
			<appender-ref ref="ConsoleAppender" />
		</logger>-->
		<!--定义输出到windows事件中-->
		<!--<logger name="LogWindows">
			<level value="ALL"/>
			<appender-ref ref="WindowsAppender" />
		</logger>-->
		<!--定义输出到文件中-->
		<logger name="LogText">
			<level value="ALL"/>
			<appender-ref ref="TextAppender" />
		</logger>
		<!--定义输出到数据库中-->
		<!--<logger name="LogDataBase">
			<level value="ALL"/>
			<appender-ref ref="DataBaseAppender" />
		</logger>-->
		<!--定义输出到控制台命令行中-->
		<appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender">
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="[%date Thread:%thread Level:%-5level %logger %property{NDC}]: %message%newline" />
			</layout>
		</appender>
		<!--定义输出到windows事件中-->
		<appender name="WindowsAppender" type="log4net.Appender.EventLogAppender">
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="[%date Thread:%thread Level:%-5level %logger %property{NDC}]: %message%newline" />
			</layout>
		</appender>
		<!--定义输出到文件中-->
		<appender name="TextAppender" type="log4net.Appender.RollingFileAppender">
			<param name="File" value="Logs\\Logs_" />
			<param name="AppendToFile" value="true" />
			<param name="MaxFileSize" value="10240" />
			<param name="MaxSizeRollBackups" value="10" />
			<param name="StaticLogFileName" value="false" />
			<!--<param name="lockingMode" value="log4net.Appender.FileAppender+MinimalLock" />-->
			<param name="MaximumFileSize" value="2MB" />
			<param name="DatePattern" value="yyyyMMdd&quot;.log&quot;" />
			<param name="RollingStyle" value="Date" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="[%date Thread:%thread Level:%-5level %logger %property{NDC}]: %message%newline" />
			</layout>
		</appender>
		<!--定义输出到数据库-->
		<appender name="DataBaseAppender" type="log4net.Appender.AdoNetAppender">
			<!--日志缓存写入条数-->
			<bufferSize value="1" />
			<!--日志数据库连接串-->
			<connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
			<connectionString value="data source=.\SQL2008;initial catalog=Demo;integrated security=false;persist security info=True;User ID=sa;Password=1qaz" />
			<!--日志数据库脚本-->
			<commandText value="INSERT INTO LogInfo ([LogDate],[LogLevel],[UserId],[UserName],[Message],[Exception]) VALUES (@LogDate, @LogLevel,@UserId,@UserName, @Message, @Exception)" />
			<!--日志时间LogDate -->
			<parameter>
				<parameterName value="@LogDate" />
				<dbType value="String" />
				<size value="30" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%date{yyyy-MM-dd HH:mm:ss}" />
				</layout>
			</parameter>
			<!--日志类型LogLevel -->
			<parameter>
				<parameterName value="@LogLevel" />
				<dbType value="String" />
				<size value="10" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%level" />
				</layout>
			</parameter>
			<!--自定义UserId -->
			<parameter>
				<parameterName value="@UserId" />
				<dbType value="String" />
				<size value="20" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%Property{UserID}" />
				</layout>
			</parameter>
			<!--自定义MethodName -->
			<parameter>
				<parameterName value="@MethodName" />
				<dbType value="String" />
				<size value="40" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%Property{MethodName}" />
				</layout>
			</parameter>
			<!--自定义ClassName -->
			<parameter>
				<parameterName value="@ClassName" />
				<dbType value="String" />
				<size value="40" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%Property{ClassName}" />
				</layout>
			</parameter>
			<!--自定义CodeIndex -->
			<parameter>
				<parameterName value="@CodeIndex" />
				<dbType value="String" />
				<size value="40" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%Property{CodeIndex}" />
				</layout>
			</parameter>
			<!--自定义UserName -->
			<parameter>
				<parameterName value="@UserName" />
				<dbType value="String" />
				<size value="50" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%Property{UserName}" />
				</layout>
			</parameter>
			<!--自定义Message -->
			<parameter>
				<parameterName value="@Message" />
				<dbType value="String" />
				<size value="200" />
				<layout type="log4net.Layout.PatternLayout">
					<conversionPattern value="%Property{Message}" />
				</layout>
			</parameter>
			<!--异常信息Exception -->
			<parameter>
				<parameterName value="@Exception" />
				<dbType value="String" />
				<size value="4000" />
				<layout type="log4net.Layout.ExceptionLayout" />
			</parameter>
		</appender>
	</log4net>
</configuration>